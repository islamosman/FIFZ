{"version":3,"sources":["../../src/pages/scan-code/scan-code.module.ts","../../src/providers/Enums/reservationEnum.ts","../../src/pages/scan-code/scan-code.ts","../../src/models/vehicaleModel.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ScanCodePage } from './scan-code';\n\n@NgModule({\n  declarations: [\n    ScanCodePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ScanCodePage),\n  ],\n})\nexport class ScanCodePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/scan-code/scan-code.module.ts","export  enum reservationEnum{\r\n    Start=1,\r\n    End=2,\r\n    TempRequest=3,\r\n    Cancel=4,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/Enums/reservationEnum.ts","import { Component, OnInit } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController, Platform, LoadingController, AlertController, ViewController } from 'ionic-angular';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';\nimport { Diagnostic } from '@ionic-native/diagnostic';\nimport { vehicaleReservationModel } from '../../models/vehicaleModel';\nimport { reservationEnum } from '../../providers/Enums/reservationEnum';\nimport { VehiclsProvider } from '../../providers/Map/vechilsApi';\nimport { AlertsProvider } from '../../providers/generic/AlertsProvider';\nimport { UserStateProvider } from '../../providers/userstate/user-state';\n/**\n * Generated class for the ScanCodePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-scan-code',\n  templateUrl: 'scan-code.html',\n})\nexport class ScanCodePage implements OnInit {\n  reservationModel: vehicaleReservationModel;\n  constructor(public v: ViewController, public navCtrl: NavController, private alertCtrl: AlertController, public navParams: NavParams, private platform: Platform,\n    private diagnostic: Diagnostic, private qrScanner: QRScanner, private menu: MenuController,\n    private _alertsService: AlertsProvider, public _VehiclsProvider: VehiclsProvider, private _userState: UserStateProvider) {\n\n    this.reservationModel = new vehicaleReservationModel();\n    this.reservationModel.vehicleId = navParams.get('vId');\n\n    this.reservationModel.riderId = 1;\n    this.reservationModel.reservationEnum = reservationEnum.Start;\n  }\n\n  ionViewDidEnter() {\n    //     this.mapContainer.nativeElement.style.setProperty(`--display`, \"none\");\n    let elm = <HTMLElement>document.querySelector(\"#map\");\n    elm.style.display = \"none\";\n\n    let elm2 = <HTMLElement>document.querySelector(\"#currentBtn\");\n    elm2.style.display = \"none\";\n    window.document.querySelector('ion-app').classList.add('transparentBody')\n    window.document.querySelector('body').classList.add('transparentBody')\n\n    this.menu.swipeEnable(true);\n  }\n\n  ionViewWillLeave() {\n    this.qrScanner.hide();\n    this.qrScanner.destroy();\n    this.menu.swipeEnable(false);\n    // this.menu.enable(true)\n  }\n\n  ngOnInit(): void {\n    // this.reservationModel.qrStr = \"ccc\";\n    // this.reservVechil();\n    // return;\n    this.platform.ready().then(() => {\n\n      this.diagnostic.requestCameraAuthorization()\n        .then((state) => {\n          console.log(JSON.stringify(state));\n\n          this.qrScanner.prepare()\n            .then((status: QRScannerStatus) => {\n              if (status.authorized) {\n                // camera permission was granted\n\n                this.qrScanner.show();\n                // start scanning\n                let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n                  this.reservationModel.qrStr = text;\n\n                  this._alertsService.showLoader();\n                  this._VehiclsProvider.reserve(this.reservationModel).subscribe(returnData => {\n                    console.log(returnData);\n\n                    this._alertsService.hideLoader();\n                    if (returnData.IsDone) {\n\n                      this.reservationModel.tripId = returnData.ResponseIdStr;\n                      this._userState.setRideStatus(this.reservationModel);\n\n                      this.qrScanner.hide(); // hide camera preview\n                      scanSub.unsubscribe(); // stop scanning\n                      this.navCtrl.setRoot(\"MapsapiPage\");\n                    } else {\n                      this._alertsService.showWarningToaster(returnData.ErrorMessegesStr);\n                    }\n                  });\n\n                  // this._VehiclsProvider.reserve(this.reservationModel).subscribe(returnData => {\n                  //   console.log(returnData);\n\n                  //   if (returnData.IsDone) {\n                  //     this.qrScanner.hide(); // hide camera preview\n                  //     scanSub.unsubscribe(); // stop scanning\n\n                  //     this.reservVechil();\n                  //   }\n\n                  // });\n                });\n\n              } else if (status.denied) {\n                // camera permission was permanently denied\n                // you must use QRScanner.openSettings() method to guide the user to the settings page\n                // then they can grant the permission from there\n              } else {\n                // permission was denied, but not permanently. You can ask for permission again at a later time.\n              }\n            })\n            .catch((e: any) => console.log('Error is', e));\n\n        }).catch(e => console.error(e));\n\n\n    });\n  }\n\n\n  ionViewDidLoad() {\n\n  }\n\n\n  reservVechil() {//id: number\n    //this._alertsService.showConfirmationDialog(id.toString(), \"\");\n\n    // this.reservationModel = new vehicaleReservationModel();\n    // this.reservationModel.vehicleId = \"3\";\n\n    // this.reservationModel.riderId = 1;\n    // this.reservationModel.reservationEnum = reservationEnum.Start;\n    this._alertsService.showLoader();\n    this._VehiclsProvider.reserve(this.reservationModel).subscribe(returnData => {\n      console.log(returnData);\n\n      this._alertsService.hideLoader();\n      if (returnData.IsDone) {\n        this.reservationModel.tripId = returnData.ResponseIdStr;\n        this._userState.setRideStatus(this.reservationModel);\n        this.navCtrl.setRoot(\"MapsapiPage\");\n      } else {\n        this._alertsService.showWarningToaster(returnData.ErrorMessegesStr);\n      }\n    });\n  }\n\n  enterCode() {\n    let alert = this.alertCtrl.create({\n      title: 'Rabbit',\n      cssClass: 'alert-class',\n      inputs: [\n        {\n          type: \"text\",\n          name: \"vQrInput\",\n          placeholder: \"Scooter Code\"\n          // value?: string;\n          // label?: string;\n          // checked?: boolean;\n          // disabled?: boolean;\n          // id?: string;\n          // handler?: Function;\n          // min?: string | number;\n          // max?: string | number;\n        }\n      ],\n      buttons: [\n        {\n          text: 'Yes',\n          handler: data => {\n            if (data.vQrInput != \"\") {\n              this.reservationModel.qrStr = data.vQrInput;\n              this.reservVechil();\n            }\n            alert.dismiss(true);\n            return false;\n          }\n        }, {\n          text: 'No',\n          handler: () => {\n            alert.dismiss(false);\n            return false;\n          }\n        }\n      ]\n    });\n\n    alert.present();\n  }\n\n\n  cancelScan() {\n    //this.v.dismiss();\n    // this.menu.enable(true);\n    this.navCtrl.setRoot(\"MapsapiPage\");\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/scan-code/scan-code.ts","import { vehiclesIcons } from \"../providers/Enums/vehiclesIcons\";\r\nimport { reservationEnum } from \"../providers/Enums/reservationEnum\";\r\n\r\nexport interface vehicaleModel {\r\n    id: string,\r\n    Name: string,\r\n    avilable: boolean,\r\n    description: string,\r\n    iconImageEnum: vehiclesIcons,\r\n    ImageUrl: string,\r\n    Lat: number,\r\n    Lng: number\r\n}\r\n\r\nexport class vehicaleReservationModel {\r\n    tripId: null;\r\n    riderId: number;\r\n    vehicleId: string;\r\n    qrStr: string;\r\n    reservationEnum: reservationEnum;\r\n    returnObj:any;\r\n    needPrepare:boolean;\r\n    rateValue:number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/vehicaleModel.ts"],"sourceRoot":""}